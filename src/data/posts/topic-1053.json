{"topicId":1053,"forumId":22,"topicTitle":"Poison Dartgun","topicTime":1288133060,"topicViews":417,"topicReplies":32,"topicStatus":0,"topicFirstPosterName":"Ylsid","topicFirstPosterColor":"","topicLastPosterName":"Ylsid","topicLastPosterColor":"","topicLastPostTime":1289056426,"posts":[{"postId":10024,"topicId":1053,"posterId":152,"postTime":1288133060,"postText":"Kills the target after 20 seconds, causing the killer to shout something loudly, exposing him. Therefore once the traitor shoots the innocent, he needs to run as fast as possible in the opposite direction to avoid being caught.\nDue to faulty hitdet, I've made it so you simply hold down fire and scrub it across the target, if you hit it it expends one ammunition.\nI've done some shoddily written code for it already, so the only challenge here is adding it to ttt :)\nshared.lua\n \n betr=\"vo/Citadel/br_betrayed.wav\" --play this when target is killed\n fiar=\"physics/metal/sawblade_stick1.wav\" --firing sound\nif SERVER then\n   AddCSLuaFile( \"shared.lua\" )\nend\n\nSWEP.HoldType\t\t\t= \"pistol\"\n\nif CLIENT then\n   SWEP.PrintName\t\t\t= \"Poison Dart\"\n   SWEP.Author\t\t\t\t= \"TTT\"\n   SWEP.Slot\t\t\t\t= 6\n   SWEP.SlotPos\t\t\t= 0\n\n   SWEP.EquipMenuData = {\n      type=\"Weapon\",\n      model=\"models/weapons/w_pist_fiveseven.mdl\",\n      desc=\"Victims take a while to die. Don't miss and aim for the legs, or you'll risk being revealed. Disguises as a pistol.\"\n   };\n\n   SWEP.Icon = \"VGUI/ttt/icon_silenced\"\nend\n\nSWEP.Base = \"weapon_tttbase\"\nSWEP.Primary.Recoil\t= 0\nSWEP.Primary.Damage = 0\nSWEP.Primary.Delay = 0\nSWEP.Primary.Cone = 0\nSWEP.Primary.ClipSize = 1\nSWEP.Primary.Automatic = true\nSWEP.Primary.DefaultClip = 2\nSWEP.Primary.ClipMax = 2\nSWEP.Primary.Ammo = \"CombineCannon\"\n\nSWEP.Kind = WEAPON_EQUIP\nSWEP.CanBuy = {ROLE_TRAITOR} -- only traitors can buythird\nSWEP.WeaponID = AMMO_SIPISTOL\n\nSWEP.IsSilent = true\n\nSWEP.ViewModel\t\t\t= \"models/weapons/v_snip_scout.mdl\"\nSWEP.WorldModel\t\t\t= \"models/weapons/w_pist_usp.mdl\"\n\nSWEP.Primary.Sound = Sound( \"weapon_AWP.Single\" ) --stuff i need to apparently leave in for some reason\nSWEP.IronSightsPos = Vector( 4.48, -4.34, 2.75)\nSWEP.IronSightsAng = Vector(-0.5, 0, 0)\n\nSWEP.PrimaryAnim = ACT_VM_PRIMARYATTACK\nSWEP.ReloadAnim = ACT_VM_RELOAD\n\nfunction SWEP:Deploy()\n   self.Weapon:SendWeaponAnim(ACT_VM_DRAW)\n   return true\nend\n\nfunction SWEP:traceent()\nlocal pos = self.Owner:GetShootPos()\nlocal ang = self.Owner:GetAimVector()\nlocal hp=self.Owner:GetEyeTrace().HitPos\nlocal tracedata = {}\ntracedata.start = pos\ntracedata.endpos = hp\ntracedata.filter = self.Owner\nlocal trace = util.TraceLine(tracedata)\n   target = trace.Entity\n   if target==nil or not target:IsValid() then\n   target=\"world\"\n   elseif target:IsWorld() then\n   target = \"world\"\nelseif target:IsValid() then\nif target:GetClass()==\"prop_dynamic\" then\ntarget=\"world\"\nend\nend\nreturn target\n end\n function SWEP:Precache()\n Sound(\"vo/Citadel/br_betrayed.wav\") --for want of a better foiled sound\n Sound(\"physics/metal/sawblade_stick1.wav\")\n end\n\n function SWEP:youhadbetternotbenear()\n self.Owner:EmitSound(betr,500,100)\n end\n cf=true\nfunction SWEP:PrimaryAttack()\nif self:CanPrimaryAttack() and cf then\ncf=false\nself.Weapon:SetNextPrimaryFire( CurTime() + self.Primary.Delay )\ntimer.Create(\"unfix\",self.Primary.Delay,1,function () cf=true end)\n\n\tself:SendWeaponAnim(PLAYER_ATTACK1)\t\t\n\tself.Owner:SetAnimation(PLAYER_ATTACK1)\n\t\ntarg=self:traceent()\nprint(targ)\nif targ~=\"world\" then\nif targ:IsPlayer() then\nself:TakePrimaryAmmo(1)\nself.Owner:EmitSound(fiar,100,100)\ntimer.Create(\"killthem\",20,1,function ()\nif targ~=nil then\nif targ:IsValid() and targ~=\"world\" then\ntarg:Kill()\nself:youhadbetternotbenear()\nend\n\nend\n\nend)\nend\nend\n\n\nend\nend\nfunction SWEP:SecondaryAttack()\nreturn\nend\n\n "},{"postId":10027,"topicId":1053,"posterId":101,"postTime":1288135365,"postText":"1. That just generally isnt the best idea :/\n2. Why wouldnt the traitor just switch weapons?\n3. It has the model of a five-seven, which is a regular pistol"},{"postId":10032,"topicId":1053,"posterId":4,"postTime":1288136128,"postText":"I wouldn't be too quick to judge if it's a bad idea or not, especially since you haven't tried it yet, Dum.\nHowever, i do agree that the model shouldn't be a fiveseven XD"},{"postId":10033,"topicId":1053,"posterId":128,"postTime":1288136241,"postText":"Nice idea but wouldn't a dart gun that knocks the victim unconscious for a few seconds be awesome?"},{"postId":10040,"topicId":1053,"posterId":153,"postTime":1288138094,"postText":"I say Yes."},{"postId":10046,"topicId":1053,"posterId":272,"postTime":1288142809,"postText":"Poison dart gun is on Chiefeh's server, don't steal from him. :C"},{"postId":10070,"topicId":1053,"posterId":153,"postTime":1288177603,"postText":"He got the code, and it sounds like a fucking fun game."},{"postId":10072,"topicId":1053,"posterId":13,"postTime":1288180120,"postText":"Sounds like fun do it ^^. Talking about model though, wouldn't it be cool to have the dart gun model from Fallout3? Random thought but someone has to have a hexed version."},{"postId":10075,"topicId":1053,"posterId":82,"postTime":1288184882,"postText":"but Gash doesn't want custom models on the server D:"},{"postId":10079,"topicId":1053,"posterId":152,"postTime":1288189835,"postText":">> 1. That just generally isnt the best idea :/\n2. Why wouldnt the traitor just switch weapons?\n3. It has the model of a five-seven, which is a regular pistol \nYou can try switching weapons, but you will still make the noise.\n\nAlso, it's intentionally a fiveseven, so it's the firing noise (which is the TWANG from sticking a saw blade into a wall with grav gun) that's supposed to distinguish it rather than the model."},{"postId":10089,"topicId":1053,"posterId":272,"postTime":1288207481,"postText":">> Ben\":22pvazzv]He got the code, and it sounds like a fucking fun game. \n\nOh well, sounds different enough. I vote yes."},{"postId":10093,"topicId":1053,"posterId":152,"postTime":1288215893,"postText":">> >> Ben\":dv8hml1a]He got the code, and it sounds like a fucking fun game. \n\nOh well, sounds different enough. I vote yes. \n\nSecond revision complete, as there isn't an edit I've reported the post with a change if it's okay :S\n\nREVISION TWO SUMMARIES:\n-worldmodel is now actually the fiveseven\n-displays attacker properly\n  betr=\"vo/Citadel/br_betrayed.wav\" --play this when target is killed\n fiar=\"physics/metal/sawblade_stick1.wav\" --firing sound\nif SERVER then\n   AddCSLuaFile( \"shared.lua\" )\nend\n\nSWEP.HoldType\t\t\t= \"pistol\"\n\nif CLIENT then\n   SWEP.PrintName\t\t\t= \"Poison Dart\"\n   SWEP.Author\t\t\t\t= \"TTT\"\n   SWEP.Slot\t\t\t\t= 6\n   SWEP.SlotPos\t\t\t= 0\n\n   SWEP.EquipMenuData = {\n      type=\"Weapon\",\n      model=\"odels/weapons/v_snip_scout.mdl\",\n      desc=\"Victims take a while to die. Don't miss and aim for the legs, or you'll risk being revealed. Disguises as a pistol.\"\n   };\n\n   SWEP.Icon = \"VGUI/ttt/icon_silenced\"\nend\n\nSWEP.Base = \"weapon_tttbase\"\nSWEP.Primary.Recoil\t= 3\nSWEP.Primary.Damage = 0\nSWEP.Primary.Delay = 0\nSWEP.Primary.Cone = 0\nSWEP.Primary.ClipSize = 1\nSWEP.Primary.Automatic = true\nSWEP.Primary.DefaultClip = 2\nSWEP.Primary.ClipMax = 2\nSWEP.Primary.Ammo = \"CombineCannon\"\n\nSWEP.Kind = WEAPON_EQUIP\nSWEP.CanBuy = {ROLE_TRAITOR} -- only traitors can buythird\nSWEP.WeaponID = AMMO_SIPISTOL\n\nSWEP.IsSilent = false\n//SWEP.AllowDrop = false\n\nSWEP.ViewModel\t\t\t= \"models/weapons/v_snip_scout.mdl\"\nSWEP.WorldModel\t\t\t= \"models/weapons/w_pist_fiveseven.mdl\"\n\nSWEP.Primary.Sound = Sound( \"weapon_AWP.Single\" ) --stuff i need to apparently leave in for some reason\nSWEP.IronSightsPos = Vector( 4.48, -4.34, 2.75)\nSWEP.IronSightsAng = Vector(-0.5, 0, 0)\n\nSWEP.PrimaryAnim = ACT_VM_PRIMARYATTACK\nSWEP.ReloadAnim = ACT_VM_RELOAD\n\nfunction SWEP:Deploy()\n   self.Weapon:SendWeaponAnim(ACT_VM_DRAW)\n   return true\nend\n\nfunction SWEP:traceent()\nlocal pos = self.Owner:GetShootPos()\nlocal ang = self.Owner:GetAimVector()\nlocal hp=self.Owner:GetEyeTrace().HitPos\nlocal tracedata = {}\ntracedata.start = pos\ntracedata.endpos = hp\ntracedata.filter = self.Owner\nlocal trace = util.TraceLine(tracedata)\n   target = trace.Entity\n   if target==nil or not target:IsValid() then\n   target=\"world\"\n   elseif target:IsWorld() then\n   target = \"world\"\nelseif target:IsValid() then\nif target:GetClass()==\"prop_dynamic\" then\ntarget=\"world\"\nend\nend\nreturn target\n end\n function SWEP:Precache()\n Sound(\"vo/Citadel/br_betrayed.wav\") --for want of a better foiled sound\n Sound(\"physics/metal/sawblade_stick1.wav\")\n end\n\n function SWEP:youhadbetternotbenear()\n self.Owner:EmitSound(betr,500,100)\n end\n cf=true\nfunction SWEP:PrimaryAttack()\nif self:CanPrimaryAttack() and cf then\ncf=false\nself.Weapon:SetNextPrimaryFire( CurTime() + self.Primary.Delay )\ntimer.Create(\"unfix\",self.Primary.Delay,1,function () cf=true end)\n\n\tself:SendWeaponAnim(PLAYER_ATTACK1)\t\t\n\tself.Owner:SetAnimation(PLAYER_ATTACK1)\n\t\ntarg=self:traceent()\nprint(targ)\nif targ~=\"world\" then\nif targ:IsPlayer() or targ:IsNPC() then\nself:TakePrimaryAmmo(1)\nself.Owner:EmitSound(fiar,100,100)\n   if ( (SinglePlayer() and SERVER) or CLIENT ) then\n      self.Weapon:SetNetworkedFloat( \"LastShootTime\", CurTime() )\n   end\n   self.Owner:ViewPunch( Angle( math.Rand(-0.2,-0.1) * self.Primary.Recoil, math.Rand(-0.1,0.1) *self.Primary.Recoil, 0 ) )\ntimer.Create(\"killthem\",20,1,function ()\nif targ~=nil then\nif targ:IsValid() and targ~=\"world\" then\n//targ:Kill()\ntarg:TakeDamage(targ:Health(),self.Owner)\nself:youhadbetternotbenear()\nend\n\nend\n\nend)\nend\nend\n\n\nend\nend\nfunction SWEP:SecondaryAttack()\nreturn\nend\n "},{"postId":10094,"topicId":1053,"posterId":152,"postTime":1288216766,"postText":"Actually fuck this, I'll just PM gash every revision because I keep messing it up :S"},{"postId":10101,"topicId":1053,"posterId":101,"postTime":1288221197,"postText":"DONT MAKE IT THE FIVE SEVEN >.<"},{"postId":10103,"topicId":1053,"posterId":4,"postTime":1288221633,"postText":"\"Poison Dartbow\"\n\nHL2 Crossbow.\nlmao"},{"postId":10108,"topicId":1053,"posterId":152,"postTime":1288225347,"postText":">> DONT MAKE IT THE FIVE SEVEN >.< \nIt's AN DISGUIS."},{"postId":10109,"topicId":1053,"posterId":101,"postTime":1288225451,"postText":">> >> DONT MAKE IT THE FIVE SEVEN >.< \nIt's AN DISGUIS. \n\n\nI think you mean \"It's a disguise.\"\n\nAnd traitor weapons arent supposed to be regular looking weapons"},{"postId":10112,"topicId":1053,"posterId":26,"postTime":1288228570,"postText":">> >> >> DONT MAKE IT THE FIVE SEVEN >.< \nIt's AN DISGUIS. \n\n\nI think you mean \"It's a disguise.\"\n\nAnd traitor weapons arent supposed to be regular looking weapons \n\n\nThen you realized he said it that way as a joke;\n\nanyways when it talked to him while he was making it (was my idea anyways ooloooloo)\n\nI mentioned it would be cool if it looked like a average five-seven, Meaning you can never trust anyone with one out, And when they shoot its even more confusing if they don't hear the yell loudly enough"},{"postId":10115,"topicId":1053,"posterId":101,"postTime":1288232049,"postText":"Still say no =/"},{"postId":10122,"topicId":1053,"posterId":299,"postTime":1288237770,"postText":"You forgot a m on one of the lines.\nLine looks like, \"odels/blahblah...\""},{"postId":10131,"topicId":1053,"posterId":153,"postTime":1288263890,"postText":">> You forgot a m on one of the lines.\nLine looks like, \"odels/blahblah...\" \n\nObvious troll is obvious."},{"postId":10132,"topicId":1053,"posterId":13,"postTime":1288267009,"postText":"Yeah I agree, it was different with the betrayal it was close but the little difference a sharp eye will catch it, if you didn't you deserve to die by it ^^.\n\nIf it has the exact same model though:\n1.) People will not be able to see it coming even if it is blatantly in front of them (FiveSeven is probably the most common gun in ttt)\n2.) People using the regular weapon will constantly suspected (distracting from real traitor) \nAnd sadly probably biggest concern\n3.) People are gonna be rdmed by some derps (\"OMGZ HE HADZ TEH DARTZGUN\")"},{"postId":10214,"topicId":1053,"posterId":152,"postTime":1288345780,"postText":">>  Cake\":r5qtljda]Yeah I agree, it was different with the betrayal it was close but the little difference a sharp eye will catch it, if you didn't you deserve to die by it ^^.\n\nIf it has the exact same model though:\n1.) People will not be able to see it coming even if it is blatantly in front of them (FiveSeven is probably the most common gun in ttt)\n2.) People using the regular weapon will constantly suspected (distracting from real traitor) \nAnd sadly probably biggest concern\n3.) People are gonna be rdmed by some derps (\"OMGZ HE HADZ TEH DARTZGUN\") \n:U\n\nWhat model should it be then? For some reason the crossbow viewmodel is flipped."},{"postId":10216,"topicId":1053,"posterId":299,"postTime":1288361528,"postText":"Magnum? Who says models can't be used twice."},{"postId":10251,"topicId":1053,"posterId":101,"postTime":1288394906,"postText":">> Magnum? Who says models can't be used twice. \n\n\nYeah, magnum seems good."},{"postId":10252,"topicId":1053,"posterId":13,"postTime":1288395822,"postText":">> >>  Cake\":19i457vb]Yeah I agree, it was different with the betrayal it was close but the little difference a sharp eye will catch it, if you didn't you deserve to die by it ^^.\n\nIf it has the exact same model though:\n1.) People will not be able to see it coming even if it is blatantly in front of them (FiveSeven is probably the most common gun in ttt)\n2.) People using the regular weapon will constantly suspected (distracting from real traitor) \nAnd sadly probably biggest concern\n3.) People are gonna be rdmed by some derps (\"OMGZ HE HADZ TEH DARTZGUN\") \n:U\n\nWhat model should it be then? For some reason the crossbow viewmodel is flipped. \nNow that I think about it FiveSeven would be cool if it wasn't for reasons above. Sound is probably closest to what a tranq gun would be, reminds me of Mk22 from MGS3. Tranq needles are close to darts (serve same function). Out of the base HL2 and CSS weapons I think Magnum may be best guess"},{"postId":10260,"topicId":1053,"posterId":2,"postTime":1288400647,"postText":"It should be the glock. That way people know if someone has a glock they're a traitor, either a dart gun or betrayl."},{"postId":10262,"topicId":1053,"posterId":101,"postTime":1288407903,"postText":">> It should be the glock. That way people know if someone has a glock they're a traitor, either a dart gun or betrayl. \n\n\nSame with magnum"},{"postId":10417,"topicId":1053,"posterId":272,"postTime":1288696564,"postText":"Stay on topic >:C"},{"postId":10431,"topicId":1053,"posterId":101,"postTime":1288725427,"postText":">> Stay on topic >:C \n\n\nWe are on teh topic."},{"postId":10435,"topicId":1053,"posterId":112,"postTime":1288728008,"postText":">> >> Stay on topic >:C \n\n\nWe are on teh topic. \n\nThere was a bot"},{"postId":10441,"topicId":1053,"posterId":101,"postTime":1288733239,"postText":"Oh, my bad. STAY ON TOPIC.\n\nAnyways, I think this was on the server for a bit, but got removed."},{"postId":10640,"topicId":1053,"posterId":152,"postTime":1289056426,"postText":">> Oh, my bad. STAY ON TOPIC.\n\nAnyways, I think this was on the server for a bit, but got removed. \nAye, apparently it has issues on the servers."}]}